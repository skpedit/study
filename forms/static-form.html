<!DOCTYPE html>
<html>

<head>
  <title>Loan Application Form</title>
</head>

<body>
  <h1>Loan Application Form</h1>
  <form id="loanForm">
    <label for="loanAmount">Loan Amount:</label>
    <input type="text" id="loanAmount" name="loanAmount" required><br><br>

    <label for="loanDuration">Loan Duration (in years):</label>
    <input type="number" id="loanDuration" name="loanDuration" required><br><br>

    <input type="submit" value="Submit">
  </form>
  <script>
    // Load process instance ID and task ID dynamically
    window.addEventListener('message', function (event) {
      const { task } = event.data;
      console.log("kumar", task);
      if (task) {
        // Populate form fields with task.id and processInstanceId
        console.log("sraban", task);
      }
    });
  </script>
  <script>



    document.getElementById("loanForm").addEventListener("submit", function (event) {
      event.preventDefault();
      var loanAmount = document.getElementById("loanAmount").value;
      var loanDuration = document.getElementById("loanDuration").value;

      // Handle form data here (send it to a backend or log it)
      console.log({ loanAmount, loanDuration });

      alert('1');
      // option -3 
      fetch('https://cors-anywhere.herokuapp.com/https://lhr-1.tasklist.camunda.io/ef423fb3-957e-4740-9b0b-a55dae920601/engine-rest/task/2251799813685878/variables', {
        method: 'GET',
        headers: {
          'Authorization': 'Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6IlFVVXdPVFpDUTBVM01qZEVRME0wTkRFelJrUkJORFk0T0RZeE1FRTBSa1pFUlVWRVF6bERNZyJ9.eyJodHRwczovL2FwaS5jbG91ZC5jYW11bmRhLmlvL2NsaWVudC9wZXJtaXNzaW9ucyI6IkdldENsdXN0ZXIgQ3JlYXRlQ2x1c3RlciBEZWxldGVDbHVzdGVyIFVwZGF0ZUNsdXN0ZXIgR2V0WmVlYmVDbGllbnQgQ3JlYXRlWmVlYmVDbGllbnQgRGVsZXRlWmVlYmVDbGllbnQgR2V0TW9kZWwgQ3JlYXRlTW9kZWwgRGVsZXRlTW9kZWwgVXBkYXRlTW9kZWwgR2V0U2VjcmV0cyBDcmVhdGVTZWNyZXRzIERlbGV0ZVNlY3JldHMgR2V0TWVtYmVycyBVcGRhdGVNZW1iZXJzIERlbGV0ZU1lbWJlcnMgRG93bmxvYWRBY3Rpdml0eSIsImh0dHBzOi8vY2FtdW5kYS5jb20vY2xpZW50SWQiOiJZd0s0S3BVNzBNNDg4eVI4IiwiaHR0cHM6Ly9hcGkuY2xvdWQuY2FtdW5kYS5pby9jbGllbnQvb3JnSWQiOiI3NjI1MjZjNS1mMGNjLTRkNWEtODZiNi03NjQxYzQxNzI3ZjEiLCJodHRwczovL2FwaS5jbG91ZC5jYW11bmRhLmlvL2NsaWVudC91dWlkIjoiMzUxZjA2NzItNmJkNC00YjkxLTgwYjktZTcwYTVjNzAwMmI4IiwiaXNzIjoiaHR0cHM6Ly93ZWJsb2dpbi5jbG91ZC5jYW11bmRhLmlvLyIsInN1YiI6IjRnRjJnb3NsVjhDek1lMmdHMFRQdW0zWXgxeU1kZXdxQGNsaWVudHMiLCJhdWQiOiJhcGkuY2xvdWQuY2FtdW5kYS5pbyIsImlhdCI6MTczNDMyNzU3NSwiZXhwIjoxNzM0NDEzOTc1LCJzY29wZSI6IkdldENsdXN0ZXIgQ3JlYXRlQ2x1c3RlciBEZWxldGVDbHVzdGVyIFVwZGF0ZUNsdXN0ZXIgR2V0WmVlYmVDbGllbnQgQ3JlYXRlWmVlYmVDbGllbnQgRGVsZXRlWmVlYmVDbGllbnQgR2V0TW9kZWwgQ3JlYXRlTW9kZWwgRGVsZXRlTW9kZWwgVXBkYXRlTW9kZWwgR2V0U2VjcmV0cyBDcmVhdGVTZWNyZXRzIERlbGV0ZVNlY3JldHMgR2V0TWVtYmVycyBVcGRhdGVNZW1iZXJzIERlbGV0ZU1lbWJlcnMgRG93bmxvYWRBY3Rpdml0eSIsImd0eSI6ImNsaWVudC1jcmVkZW50aWFscyIsImF6cCI6IjRnRjJnb3NsVjhDek1lMmdHMFRQdW0zWXgxeU1kZXdxIn0.N4Nnf9eB_43615pFX9EaddDVoHgDxItDxkcGmJqtf0NubeGALq6pkRiJygw-LDwsd-o7N-XkXx9_owWE18TZ8Fpd5nYpGkHE0sZakM1kHVUoOFT0Ltj-F1gFJQvwug9EW8t8_yl1dh43JGH79WpCs5MQAFy6SyhAhf3Pxs8fZrBZSrcMBhvnpKLP2g_naUtNlrhpsIswKIHYPg-qRZMYG9UahIa4qZuHVIi67-11JC_Hy-K6Twm5Rk47fdWijnfqyTpxk2aeEgrG5k8wfWYU5oDj4wIIgZGFtpIjGJeP5-PTrWhOxqdFRjZ8LS32CDxOxAAFwnqTkEAG-0e3z1MB3g', // Replace with your actual OAuth token
        },
      })
        .then((response) => {
          alert('2');
          if (!response.ok) {
            throw new Error('Failed to fetch task variables: ' + response.statusText);
          }
          return response.json();
        })
        .then((data) => {
          console.log("data---------->", data);
          alert("API for variables");
        })
        .catch((error) => console.error('Error:', error));

    });

    // option -1
    // var camForms = camForm || window.parent.camForm || window.top.camForm;
    // console.log(camForms);

</script>
</body>

</html>